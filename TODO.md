# Microblog TODO

## Phase 1.5: UX改善（優先度：高）

### ✅ 完了
- [x] PWA対応（manifest、アイコン）
- [x] カスタムドメイン設定（mb.krnk.app, mb-api.krnk.app）
- [x] JWT認証
- [x] PWAデプロイ（start_url: /admin）

### 🚧 次回やる（UI改善）
- [ ] 削除ボタンのレイアウト修正（時間表示の横 or ...メニュー）
- [ ] JWT有効期限の延長検討（24h → 7d or 30d）

## Phase 2: コア機能追加

### 画像アップロード（R2）
- [ ] R2バケット作成
- [ ] 画像アップロードAPI（POST /api/media）
- [ ] 投稿に画像添付機能
- [ ] 画像プレビュー表示
- [ ] 画像サイズ制限・圧縮

**優先度**: 高
**工数**: 2-3時間

### ページネーション
- [ ] バックエンド: クエリパラメータ対応（?page=1&limit=20）
- [ ] フロントエンド: 無限スクロール実装
- [ ] または: ページネーションUI実装

**優先度**: 中
**工数**: 1-2時間

### 検索機能
- [ ] バックエンド: 全文検索API（GET /api/posts/search?q=keyword）
- [ ] D1での検索実装（LIKE or FTS5）
- [ ] フロントエンド: 検索UI
- [ ] 検索結果表示

**優先度**: 中
**工数**: 2-3時間

## Phase 3: ActivityPub対応

### ActivityPub発信（Phase 2）
- [ ] `/posts/:id` - 個別投稿ページ（HTML + JSON-LD）
- [ ] `/.well-known/webfinger` - アカウント発見
- [ ] `/actor` - プロフィール（ActivityPub JSON-LD）
- [ ] `/inbox` - アクティビティ受信
- [ ] HTTP Signatures実装
- [ ] Mastodonからの表示確認

**優先度**: 高（長期目標）
**工数**: 4-6時間

### ActivityPub受信（Phase 3）
- [ ] フォロー機能
- [ ] ホームタイムライン
- [ ] リモートユーザー情報取得

**優先度**: 中（Phase 2後）
**工数**: 4-6時間

### インタラクション（Phase 4）
- [ ] いいね機能
- [ ] ブースト（リポスト）
- [ ] リプライ

**優先度**: 低
**工数**: 3-4時間

## Phase 4: アーキテクチャ改善

### サブドメイン分離
- [ ] admin-frontend/ ディレクトリ作成
- [ ] 管理画面を分離
- [ ] Cloudflare Pages新規プロジェクト作成
- [ ] DNS設定（admin.mb.krnk.app）
- [ ] 環境変数設定

**優先度**: 低（管理画面が複雑化したら）
**工数**: 2-3時間

## Phase 5: リッチコンテンツ

### メディア対応
- [ ] 動画アップロード対応
- [ ] 複数画像添付
- [ ] 画像編集機能（トリミングなど）

### リンクプレビュー
- [ ] OGP取得
- [ ] リンクカード表示

**優先度**: 低
**工数**: 3-4時間

## 技術的負債・リファクタリング

- [ ] TypeScript型定義の整理
- [ ] エラーハンドリングの統一
- [ ] テストコード追加
- [ ] パフォーマンス最適化

## メモ

- 料金: 現在の構成で完全無料（月1万PV程度まで）
- R2: 10GB無料、転送料無料
- Workers: 10万リクエスト/日 無料
- D1: 500万行/日 読み取り無料
